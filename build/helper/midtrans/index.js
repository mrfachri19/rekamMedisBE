const midtransClient = require("midtrans-client");

require("dotenv").config(); // eslint-disable-next-line no-console


console.log({
  isProduction: process.env.MIDT_IS_PRODUCTION === "true",
  serverKey: process.env.MIDTRANS_SERVER_KEY,
  clientKey: process.env.MIDTRANS_CLIENT_KEY
});
const snap = new midtransClient.Snap({
  isProduction: process.env.MIDT_IS_PRODUCTION === "true",
  serverKey: process.env.MIDTRANS_SERVER_KEY,
  clientKey: process.env.MIDTRANS_CLIENT_KEY
});
module.exports = {
  post: (id, amount) => new Promise((resolve, reject) => {
    const parameter = {
      transaction_details: {
        order_id: id,
        gross_amount: amount
      },
      credit_card: {
        secure: true
      }
    };
    snap.createTransaction(parameter).then(result => {
      resolve(result.redirect_url);
    }).catch(err => {
      reject(err);
    });
  }),
  notif: body => new Promise((resolve, reject) => {
    snap.transaction.notification(body).then(result => {
      resolve(result);
    }).catch(err => {
      reject(err);
    });
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtaWR0cmFuc0NsaWVudCIsInJlcXVpcmUiLCJjb25maWciLCJjb25zb2xlIiwibG9nIiwiaXNQcm9kdWN0aW9uIiwicHJvY2VzcyIsImVudiIsIk1JRFRfSVNfUFJPRFVDVElPTiIsInNlcnZlcktleSIsIk1JRFRSQU5TX1NFUlZFUl9LRVkiLCJjbGllbnRLZXkiLCJNSURUUkFOU19DTElFTlRfS0VZIiwic25hcCIsIlNuYXAiLCJtb2R1bGUiLCJleHBvcnRzIiwicG9zdCIsImlkIiwiYW1vdW50IiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJwYXJhbWV0ZXIiLCJ0cmFuc2FjdGlvbl9kZXRhaWxzIiwib3JkZXJfaWQiLCJncm9zc19hbW91bnQiLCJjcmVkaXRfY2FyZCIsInNlY3VyZSIsImNyZWF0ZVRyYW5zYWN0aW9uIiwidGhlbiIsInJlc3VsdCIsInJlZGlyZWN0X3VybCIsImNhdGNoIiwiZXJyIiwibm90aWYiLCJib2R5IiwidHJhbnNhY3Rpb24iLCJub3RpZmljYXRpb24iXSwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvaGVscGVyL21pZHRyYW5zL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1pZHRyYW5zQ2xpZW50ID0gcmVxdWlyZShcIm1pZHRyYW5zLWNsaWVudFwiKTtcbnJlcXVpcmUoXCJkb3RlbnZcIikuY29uZmlnKCk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlXG5jb25zb2xlLmxvZyh7XG4gIGlzUHJvZHVjdGlvbjogcHJvY2Vzcy5lbnYuTUlEVF9JU19QUk9EVUNUSU9OID09PSBcInRydWVcIixcbiAgc2VydmVyS2V5OiBwcm9jZXNzLmVudi5NSURUUkFOU19TRVJWRVJfS0VZLFxuICBjbGllbnRLZXk6IHByb2Nlc3MuZW52Lk1JRFRSQU5TX0NMSUVOVF9LRVksXG59KTtcblxuY29uc3Qgc25hcCA9IG5ldyBtaWR0cmFuc0NsaWVudC5TbmFwKHtcbiAgaXNQcm9kdWN0aW9uOiBwcm9jZXNzLmVudi5NSURUX0lTX1BST0RVQ1RJT04gPT09IFwidHJ1ZVwiLFxuICBzZXJ2ZXJLZXk6IHByb2Nlc3MuZW52Lk1JRFRSQU5TX1NFUlZFUl9LRVksXG4gIGNsaWVudEtleTogcHJvY2Vzcy5lbnYuTUlEVFJBTlNfQ0xJRU5UX0tFWSxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgcG9zdDogKGlkLCBhbW91bnQpID0+XG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcGFyYW1ldGVyID0ge1xuICAgICAgICB0cmFuc2FjdGlvbl9kZXRhaWxzOiB7XG4gICAgICAgICAgb3JkZXJfaWQ6IGlkLFxuICAgICAgICAgIGdyb3NzX2Ftb3VudDogYW1vdW50LFxuICAgICAgICB9LFxuICAgICAgICBjcmVkaXRfY2FyZDoge1xuICAgICAgICAgIHNlY3VyZTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIHNuYXBcbiAgICAgICAgLmNyZWF0ZVRyYW5zYWN0aW9uKHBhcmFtZXRlcilcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0LnJlZGlyZWN0X3VybCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgIH0pO1xuICAgIH0pLFxuXG4gIG5vdGlmOiAoYm9keSkgPT5cbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBzbmFwLnRyYW5zYWN0aW9uXG4gICAgICAgIC5ub3RpZmljYXRpb24oYm9keSlcbiAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfSksXG59O1xuIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxjQUFjLEdBQUdDLE9BQU8sQ0FBQyxpQkFBRCxDQUE5Qjs7QUFDQUEsT0FBTyxDQUFDLFFBQUQsQ0FBUCxDQUFrQkMsTUFBbEIsRyxDQUVBOzs7QUFDQUMsT0FBTyxDQUFDQyxHQUFSLENBQVk7RUFDVkMsWUFBWSxFQUFFQyxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsa0JBQVosS0FBbUMsTUFEdkM7RUFFVkMsU0FBUyxFQUFFSCxPQUFPLENBQUNDLEdBQVIsQ0FBWUcsbUJBRmI7RUFHVkMsU0FBUyxFQUFFTCxPQUFPLENBQUNDLEdBQVIsQ0FBWUs7QUFIYixDQUFaO0FBTUEsTUFBTUMsSUFBSSxHQUFHLElBQUliLGNBQWMsQ0FBQ2MsSUFBbkIsQ0FBd0I7RUFDbkNULFlBQVksRUFBRUMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLGtCQUFaLEtBQW1DLE1BRGQ7RUFFbkNDLFNBQVMsRUFBRUgsT0FBTyxDQUFDQyxHQUFSLENBQVlHLG1CQUZZO0VBR25DQyxTQUFTLEVBQUVMLE9BQU8sQ0FBQ0MsR0FBUixDQUFZSztBQUhZLENBQXhCLENBQWI7QUFNQUcsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0VBQ2ZDLElBQUksRUFBRSxDQUFDQyxFQUFELEVBQUtDLE1BQUwsS0FDSixJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0lBQy9CLE1BQU1DLFNBQVMsR0FBRztNQUNoQkMsbUJBQW1CLEVBQUU7UUFDbkJDLFFBQVEsRUFBRVAsRUFEUztRQUVuQlEsWUFBWSxFQUFFUDtNQUZLLENBREw7TUFLaEJRLFdBQVcsRUFBRTtRQUNYQyxNQUFNLEVBQUU7TUFERztJQUxHLENBQWxCO0lBVUFmLElBQUksQ0FDRGdCLGlCQURILENBQ3FCTixTQURyQixFQUVHTyxJQUZILENBRVNDLE1BQUQsSUFBWTtNQUNoQlYsT0FBTyxDQUFDVSxNQUFNLENBQUNDLFlBQVIsQ0FBUDtJQUNELENBSkgsRUFLR0MsS0FMSCxDQUtVQyxHQUFELElBQVM7TUFDZFosTUFBTSxDQUFDWSxHQUFELENBQU47SUFDRCxDQVBIO0VBUUQsQ0FuQkQsQ0FGYTtFQXVCZkMsS0FBSyxFQUFHQyxJQUFELElBQ0wsSUFBSWhCLE9BQUosQ0FBWSxDQUFDQyxPQUFELEVBQVVDLE1BQVYsS0FBcUI7SUFDL0JULElBQUksQ0FBQ3dCLFdBQUwsQ0FDR0MsWUFESCxDQUNnQkYsSUFEaEIsRUFFR04sSUFGSCxDQUVTQyxNQUFELElBQVk7TUFDaEJWLE9BQU8sQ0FBQ1UsTUFBRCxDQUFQO0lBQ0QsQ0FKSCxFQUtHRSxLQUxILENBS1VDLEdBQUQsSUFBUztNQUNkWixNQUFNLENBQUNZLEdBQUQsQ0FBTjtJQUNELENBUEg7RUFRRCxDQVREO0FBeEJhLENBQWpCIn0=