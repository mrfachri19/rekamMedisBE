const connection = require("../../config/mysql");

module.exports = {
  register: data => new Promise((resolve, reject) => {
    connection.query("INSERT INTO user_management SET ?", data, (error, result) => {
      if (!error) {
        const newResult = {
          id: result.insertId,
          ...data
        };
        delete newResult.password;
        resolve(newResult);
      } else {
        reject(new Error(`SQL : ${error.sqlMessage}`));
      }
    });
  }),
  getUserByEmail: email => new Promise((resolve, reject) => {
    connection.query("SELECT * FROM user_management WHERE email = ?", email, (error, result) => {
      if (!error) {
        resolve(result);
      } else {
        reject(new Error(`SQL: ${error.sqlMessage}`));
      }
    });
  })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb25uZWN0aW9uIiwicmVxdWlyZSIsIm1vZHVsZSIsImV4cG9ydHMiLCJyZWdpc3RlciIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInF1ZXJ5IiwiZXJyb3IiLCJyZXN1bHQiLCJuZXdSZXN1bHQiLCJpZCIsImluc2VydElkIiwicGFzc3dvcmQiLCJFcnJvciIsInNxbE1lc3NhZ2UiLCJnZXRVc2VyQnlFbWFpbCIsImVtYWlsIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL21vZHVsZXMvYXV0aC9hdXRoTW9kZWwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY29ubmVjdGlvbiA9IHJlcXVpcmUoXCIuLi8uLi9jb25maWcvbXlzcWxcIik7XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IHtcclxuICByZWdpc3RlcjogKGRhdGEpID0+XHJcbiAgICBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgIGNvbm5lY3Rpb24ucXVlcnkoXCJJTlNFUlQgSU5UTyB1c2VyX21hbmFnZW1lbnQgU0VUID9cIiwgZGF0YSwgKGVycm9yLCByZXN1bHQpID0+IHtcclxuICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICBjb25zdCBuZXdSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgIGlkOiByZXN1bHQuaW5zZXJ0SWQsXHJcbiAgICAgICAgICAgIC4uLmRhdGEsXHJcbiAgICAgICAgICB9O1xyXG4gICAgICAgICAgZGVsZXRlIG5ld1Jlc3VsdC5wYXNzd29yZDtcclxuICAgICAgICAgIHJlc29sdmUobmV3UmVzdWx0KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihgU1FMIDogJHtlcnJvci5zcWxNZXNzYWdlfWApKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgfSksXHJcbiAgZ2V0VXNlckJ5RW1haWw6IChlbWFpbCkgPT5cclxuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgY29ubmVjdGlvbi5xdWVyeShcclxuICAgICAgICBcIlNFTEVDVCAqIEZST00gdXNlcl9tYW5hZ2VtZW50IFdIRVJFIGVtYWlsID0gP1wiLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIChlcnJvciwgcmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICBpZiAoIWVycm9yKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFNRTDogJHtlcnJvci5zcWxNZXNzYWdlfWApKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICk7XHJcbiAgICB9KSxcclxuXHJcblxyXG59OyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsVUFBVSxHQUFHQyxPQUFPLENBQUMsb0JBQUQsQ0FBMUI7O0FBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQjtFQUNmQyxRQUFRLEVBQUdDLElBQUQsSUFDUixJQUFJQyxPQUFKLENBQVksQ0FBQ0MsT0FBRCxFQUFVQyxNQUFWLEtBQXFCO0lBQy9CUixVQUFVLENBQUNTLEtBQVgsQ0FBaUIsbUNBQWpCLEVBQXNESixJQUF0RCxFQUE0RCxDQUFDSyxLQUFELEVBQVFDLE1BQVIsS0FBbUI7TUFDN0UsSUFBSSxDQUFDRCxLQUFMLEVBQVk7UUFDVixNQUFNRSxTQUFTLEdBQUc7VUFDaEJDLEVBQUUsRUFBRUYsTUFBTSxDQUFDRyxRQURLO1VBRWhCLEdBQUdUO1FBRmEsQ0FBbEI7UUFJQSxPQUFPTyxTQUFTLENBQUNHLFFBQWpCO1FBQ0FSLE9BQU8sQ0FBQ0ssU0FBRCxDQUFQO01BQ0QsQ0FQRCxNQU9PO1FBQ0xKLE1BQU0sQ0FBQyxJQUFJUSxLQUFKLENBQVcsU0FBUU4sS0FBSyxDQUFDTyxVQUFXLEVBQXBDLENBQUQsQ0FBTjtNQUNEO0lBQ0YsQ0FYRDtFQVlELENBYkQsQ0FGYTtFQWdCZkMsY0FBYyxFQUFHQyxLQUFELElBQ2QsSUFBSWIsT0FBSixDQUFZLENBQUNDLE9BQUQsRUFBVUMsTUFBVixLQUFxQjtJQUMvQlIsVUFBVSxDQUFDUyxLQUFYLENBQ0UsK0NBREYsRUFFRVUsS0FGRixFQUdFLENBQUNULEtBQUQsRUFBUUMsTUFBUixLQUFtQjtNQUNqQixJQUFJLENBQUNELEtBQUwsRUFBWTtRQUNWSCxPQUFPLENBQUNJLE1BQUQsQ0FBUDtNQUNELENBRkQsTUFFTztRQUNMSCxNQUFNLENBQUMsSUFBSVEsS0FBSixDQUFXLFFBQU9OLEtBQUssQ0FBQ08sVUFBVyxFQUFuQyxDQUFELENBQU47TUFDRDtJQUNGLENBVEg7RUFXRCxDQVpEO0FBakJhLENBQWpCIn0=